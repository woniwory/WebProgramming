<!DOCTYPE html>
<html>
    <head>
        <title>오디오 리스트 연속 재생</title>
    </head>
    <body>
        <h3>오디오 리스트 연속 재생</h3>
        <hr>
        처음 play 버튼을 누르면 리스트에 있는 곡이 연속하여 자동 재생 됩니다.
        마우스로 다른 곡을 선택하면 곡이 바뀝니다. next 버튼을 누르면 다음 곡으로 넘어갑니다.
        <hr><br>
        <div id="aud"><audio src="" controls></audio></div><br><br>
        <select onclick="play()" id="music" size="3"> 
            <option value="Conan Gray - People Watching (Official Video).mp3" onclick="selected_audio()">1</option>
            <option value="Etham - 12:45 (Lyric Video).mp3" onclick="selected_audio()">2</option>
            <option value="Maroon 5 - Memories (Official Video).mp3" onclick="selected_audio()">3</option>
        </select>
        <input onclick="play()" type="button" value="play">
        <input onclick="next()" type="button" value="next">

        <script>
            let aud=document.getElementById("aud");
            let music=document.getElementById("music");

            function play(){
                let scrList = document.getElementById("music").value;
                if(music.selectedIndex === -1)
                {
                    music.selectedIndex+=1;
                    aud.innerHTML =    `<audio id="audio" src="${music[0].value}" onended="end_music()" controls autoplay></audio>`;
                }
                else 
                {
                    aud.innerHTML =    `<audio id="audio" src="${scrList}" onended="end_music()" controls autoplay></audio>`;
                }
            }

            function next(){
                let idx = music.selectedIndex+1;
                music.selectedIndex+=1;

                if(idx === music.length)
                {
                    music.selectedIndex = 0;
                    aud.innerHTML =    `<audio id="audio" src="${music[0].value}" onended="end_music()" controls autoplay></audio>`;
                } else {
                    aud.innerHTML =    `<audio id="audio" src="${music[idx].value}" onended="end_music()" controls autoplay></audio>`;
                }
            }

            function end_music(){
                let idx = music.selectedIndex+1;
                music.selectedIndex+=1;

                if(idx === music.length){
                    music.selectedIndex = 0;
                    aud.innerHTML =    `<audio id="audio" src="${music[0].value}" onended="end_music()" controls autoplay></audio>`;
                } else {
                    aud.innerHTML =    `<audio id="audio" src="${music[idx].value}" onended="end_music()" controls autoplay></audio>`;
                }
            }
            
        </script>
    </body>
</html>
